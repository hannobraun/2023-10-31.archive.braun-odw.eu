{% macro title(word="") %}
    {% if word == "" %}
        <title>Hanno Braun</title>
    {% else %}
        <title>{{ word }} - Hanno Braun</title>
    {% endif %}
{% endmacro %}

{% macro email() %}
    <a href="mailto:Hanno%20Braun%20%3Channo@braun-odw.eu%3E">
        hanno@braun-odw.eu
    </a>
{% endmacro %}

{% macro matrix() %}
    <a href="https://matrix.to/#/@hanno:braun-odw.eu">@hanno:braun-odw.eu</a>
{% endmacro %}

{% macro nav_entry(name) %}
    {% set path = config.extra.pages[name] %}

    {% if page %}
        {% set current_path = page.path %}
    {% elif section %}
        {% set current_path = section.path %}
    {% endif %}

    {% if current_path is starting_with(path) %}
        {% set class = "active" %}
    {% else %}
        {% set class = "" %}
    {% endif %}

    <li><a class="{{ class }}" href="{{ path }}">{{ name }}</a></li>
{% endmacro %}

{% macro back(name) %}
    {% set path = config.extra.pages[name] %}

    <a href="{{ path }}">ü¢ê back to {{ name }}</a>
{% endmacro %}

{% macro section_title() %}
    <header class="section">
        <h2>{{ section.title }}</h2>
        <a href="/atom.xml">(Atom feed)</a>
    </header>
{% endmacro %}

{% macro update(page, show_permalink) %}
    <article class="update">
        <div class="content">
            {{ page.content | safe }}
        </div>
        <div class="metadata">
            Posted on <span class="date">{{ page.date | date }}</span>
            {% if show_permalink == true %}
                - <a href="{{ page.path }}">permalink</a>
            {% endif %}
        </div>
    </article>
{% endmacro %}

{% macro note_preview(page) %}
    <article class="note-preview">
        <div class="preview">
            <a href="{{ page.path }}">
                <header class="note">
                    {{ macros::note_title(page=page) }}
                </header>

                {% if page.extra.image %}
                    <img
                        src="/notes/{{ page.slug }}/{{ page.extra.image }}?nf_resize=fit&w=600"
                        alt="{{ page.title }}" />
                {% endif %}
                {% if page.extra.intro %}
                    <p>{{ page.extra.intro | markdown | safe }}</p>
                {% endif %}
            </a>
            <div class="goto">
                <a href="{{ page.path }}">Go to note...</a>
            </div>
        </div>
    </article>
{% endmacro %}

{% macro note_title(page) %}
    <h2>{{ page.title }}</h2>
    <p class="published">
        {% if page.updated %}
            <strong>Published:</strong> {{ page.date }} (<strong>updated</strong> {{ page.updated }})
        {% else %}
            <strong>Published:</strong> {{ page.date }}
        {% endif %}
    </p>
{% endmacro %}

{% macro pagination() %}
    <nav class="pagination">
        {% if paginator.previous %}
            <a
                class="previous"
                href="{{ macros::abs_to_rel(abs=paginator.previous) }}">
                ü¢ê previous page
            </a>
        {% else %}
            <p class="disabled">
                ü¢ê previous page
            </p>
        {% endif %}
        {% if paginator.next %}
            <a
                class="next"
                href="{{ macros::abs_to_rel(abs=paginator.next) }}">
                next page ü¢í
            </a>
        {% else %}
            <p class="disabled">
                next page ü¢í
            </p>
        {% endif %}
    </div>
{% endmacro %}

{% macro abs_to_rel(abs) %}
    {{ abs | trim_start_matches(pat=config.base_url) }}
{% endmacro %}

{% macro newsletter_form(as_box=true) %}
    <form
        class="newsletter {% if as_box %} newsletter-box {% endif %}"
        method="POST"
        action="https://d1e704b6.sibforms.com/serve/MUIEAF1fO262IbH9kaoDscoQaMTTyYj1-IQeOP-2VjyV6YCTUdLogfhQmvpbWxsro2Yy7q5MXbgagaaqUVMoKUUaWhN2Bz4jEg0r14e4MwMAhiAA2u5mI-WDPamXyKsiAxGgetQzrr4w11vVB9qSrNLFWu6VHQYeXcDqJVfY1WkiRJLbGhezInORJhakU4ET8hDHgqKMq8-sL8EY">

    {% if as_box %}
        <h2>Newsletter</h2>
        <p>
            Sign up to stay informed on what's happening around here. I'll send out an email from time to time, to summarize what's going on.
        </p>
    {% endif %}

    <input
        type="email"
        name="EMAIL"
        required
        placeholder="your@email.com" />
    <div class="submit">
        <input
            type="submit"
            value="Sign up" />
    </div>
</form>
{% endmacro %}
